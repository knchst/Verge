(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{136:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var r=n(2),a=n(9),c=(n(0),n(170)),o={id:"changes",title:"Changes object - helps detecting differences and reduces copy-cosuming",sidebar_label:"Changes object"},i={id:"VergeStore/changes",isDocsHomePage:!1,title:"Changes object - helps detecting differences and reduces copy-cosuming",description:"Update UI from State",source:"@site/docs/VergeStore/changes.md",permalink:"/Verge/docs/VergeStore/changes",editUrl:"https://github.com/VergeGroup/Verge/docs/docs/VergeStore/changes.md",sidebar_label:"Changes object",sidebar:"docs",previous:{title:"State - a data describes the current state of the app",permalink:"/Verge/docs/VergeStore/state"},next:{title:"Extended Computed property on the State",permalink:"/Verge/docs/VergeStore/extended-computed-property"}},s=[{value:"Update UI from State",id:"update-ui-from-state",children:[]},{value:"Update UI when only the state changed",id:"update-ui-when-only-the-state-changed",children:[]},{value:"Subscribing the state",id:"subscribing-the-state",children:[]}],l={rightToc:s};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h2",{id:"update-ui-from-state"},"Update UI from State"),Object(c.b)("p",null,"In subscribing the state and binding UI, it's most important to reduce the meaningless time to update UI."),Object(c.b)("p",null,"What things are the meaningless? that is the update UI which contains no updates."),Object(c.b)("p",null,"Basically, we can do this like followings"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-swift"}),"func updateUI(newState: State) {\n  if self.label.text != newState.name {\n    self.label.text = newState.name\n  }\n}\n")),Object(c.b)("p",null,"Although, this approach make the code a little bit complicated by increasing the code to update UI."),Object(c.b)("h2",{id:"update-ui-when-only-the-state-changed"},"Update UI when only the state changed"),Object(c.b)("p",null,"Store provides ",Object(c.b)("inlineCode",{parentName:"p"},"Changes<State>")," object.\nIt provides some functions to get the value from state with condition."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-swift"}),"let store: Store<MyState, Never>\n\nlet changes: Changes<MyState> = store.changes\n\nchanges.ifChanged(\\.name) { name in\n  // called only name changed\n}\n")),Object(c.b)("h2",{id:"subscribing-the-state"},"Subscribing the state"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-swift"}),"class ViewController: UIViewController {\n\n  var subscriptions = Set<UntilDeinitCancellable>()\n\n  let store: MyStore<MyState, MyActivity>\n\n  override func viewDidLoad() {\n\n    super.viewDidLoad()\n\n    store.sinkChanges { [weak self] (changes) in\n      // it will be called on the thread which committed\n      self?.update(changes: changes)\n    }\n    .store(in: &subscriptions)\n  }\n\n  private func update(changes: Changes<MyState> {\n    changes.ifChanged(\\.name) { name in\n      // called only name changed\n    }\n    ...\n  }\n\n}\n")))}p.isMDXComponent=!0},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var r=n(0),a=n.n(r);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=a.a.createContext({}),p=function(e){var t=a.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},b=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,c=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(n),b=r,h=u["".concat(o,".").concat(b)]||u[b]||d[b]||c;return n?a.a.createElement(h,i(i({ref:t},l),{},{components:n})):a.a.createElement(h,i({ref:t},l))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var c=n.length,o=new Array(c);o[0]=b;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var l=2;l<c;l++)o[l]=n[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);